{% extends "base.html" %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/members.css' %}">
{% endblock %}

{% block content %}

<section class="member-search-section section">
    <div class="section-container container-col">
        <div class="img-container box-shadow">
            <img src="{{ MEDIA_URL }}events-home.png" alt="MREEA Event" class="img-100a">
        </div>

        <form action="{% url 'members' %}" method="POST" class="member-search-container container-col box-shadow form">
            {% csrf_token %}
            <div class="heading-container visit-link">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" class="dark-text" viewBox="0 0 256 256">
                        <path d="M117.25 157.92a60 60 0 1 0-66.5 0a95.83 95.83 0 0 0-47.22 37.71a8 8 0 1 0 13.4 8.74a80 80 0 0 1 134.14 0a8 8 0 0 0 13.4-8.74a95.83 95.83 0 0 0-47.22-37.71M40 108a44 44 0 1 1 44 44a44.05 44.05 0 0 1-44-44m210.14 98.7a8 8 0 0 1-11.07-2.33A79.83 79.83 0 0 0 172 168a8 8 0 0 1 0-16a44 44 0 1 0-16.34-84.87a8 8 0 1 1-5.94-14.85a60 60 0 0 1 55.53 105.64a95.83 95.83 0 0 1 47.22 37.71a8 8 0 0 1-2.33 11.07" />
                    </svg>
                    <span class="sr-only">Users Icon</span>
                </div>
                <h2 class="dark-text subheading">Search for MREEA Members</h2>
            </div>
            <div class="input-container-group container-row">
                <div class="input-wrapper">
                    <div class="visit-link">
                        <div class="icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" class="dark-text" viewBox="0 0 16 16">
                                <path d="M4.5 2A2.5 2.5 0 0 0 2 4.5v7A2.5 2.5 0 0 0 4.5 14h7a2.5 2.5 0 0 0 2.5-2.5v-7A2.5 2.5 0 0 0 11.5 2zM3 4.5A1.5 1.5 0 0 1 4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5zm2.5.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z" />
                            </svg>
                            <span class="sr-only">First Name Icon</span>
                        </div>
                        <label for="id_first_name" class="dark-text-2 small-text">First Name</label>
                    </div>
                    <div class="input-container col-2">
                        <input type="text" name="id_first_name" id="id_first_name" value="{{ first_name }}" placeholder="Enter First name">
                    </div>
                </div>
                <div class="input-wrapper">
                    <div class="visit-link">
                        <div class="icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" class="dark-text" viewBox="0 0 16 16">
                                <path d="M4.5 2A2.5 2.5 0 0 0 2 4.5v7A2.5 2.5 0 0 0 4.5 14h7a2.5 2.5 0 0 0 2.5-2.5v-7A2.5 2.5 0 0 0 11.5 2zM3 4.5A1.5 1.5 0 0 1 4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5zm7.5.5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0 3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1z" />
                            </svg>
                            <span class="sr-only">Last Name Icon</span>
                        </div>
                        <label for="id_last_name" class="dark-text-2 small-text">Last Name</label>
                    </div>
                    <div class="input-container col-2">
                        <input type="text" name="id_last_name" id="id_last_name" value="{{ last_name }}" placeholder="Enter Last name">
                    </div>
                </div>
            </div>

            <div class="input-container-group container-row">
                <div class="input-wrapper">
                    <div class="visit-link">
                        <div class="icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" class="dark-text" viewBox="0 0 1024 1024">
                                <path d="M1021.06 839.968L833.798 493.664c19.104-43.36 29.792-91.28 29.792-141.696C863.59 157.664 706.07.16 511.782.16c-194.336 0-351.84 157.52-351.84 351.808c0 51.632 11.216 100.624 31.184 144.784L3.03 839.808c-6.065 11.024-5.057 24.624 2.527 34.688c7.6 10.033 20.432 14.752 32.687 11.873l160.624-36.848l54.976 153.12c4.288 11.904 15.152 20.16 27.744 21.088c.817.064 1.6.096 2.368.096a32.002 32.002 0 0 0 28.192-16.88L475.844 701.97a355.152 355.152 0 0 0 35.92 1.808c11.12 0 22.095-.576 32.943-1.6l167.248 305.008a31.984 31.984 0 0 0 30.56 16.527c12.56-1.008 23.376-9.248 27.631-21.088l54.976-153.12l160.624 36.848c12.32 2.975 25.024-1.809 32.624-11.809c7.632-9.984 8.656-23.52 2.688-34.576zm-731.282 73.376L249.52 801.183c-5.504-15.248-21.471-24.128-37.28-20.368l-118.8 27.248l135.41-246.976c44.592 60.24 107.952 105.68 181.44 127.793zm-65.553-561.377c0-158.544 129.009-287.536 287.568-287.536c158.544 0 287.536 128.992 287.536 287.536S670.337 639.535 511.793 639.535c-158.576 0-287.568-129.024-287.568-287.568m587.52 428.847c-15.872-3.744-31.776 5.12-37.28 20.367l-40.529 112.976l-123.152-224.56c75.44-22.096 140.337-68.735 185.505-130.735L931.137 808.19z" />
                            </svg>
                            <span class="sr-only">Class Icon</span>
                        </div>
                    </div>
                    <div class="custom-checkbox-options-input-container input-container col-2 wrapper-menu">
                        <div class="custom-checkbox-options-btn wrapper-btn">
                            <p class="default-text dark-text-2">(<span class="number-selected">0</span>) Selected</p>
                            <div class="icon-container btn-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" class="dark-text-2" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414" clip-rule="evenodd" />
                                </svg>
                                <span class="sr-only">Chevron Down Icon</span>
                            </div>
                        </div>
                        <div class="custom-checkbox-options-container">
                            <div class="options-container">
                                <div class="checkbox-input-container">
                                    <input type="checkbox" name="id_all_categories" id="id_all_categories" data-select-all="all" class="checkbox-input select-all-checkbox">
                                    <label for="id_all_categories" class="checkbox-label dark-text-2">All Classes</label>
                                </div>
                                {% for item in category_and_classes %}
                                <p class="category-heading dark-text small-text">{{ item.category.friendly_name }}</p>
                                <div class="checkbox-input-container">
                                    <input type="checkbox" name="id_all_{{ item.category.name }}" id="id_all_{{ item.category.name }}" data-select-all="{{ item.category.name }}" class="checkbox-input select-all-checkbox">
                                    <label for="id_all_{{ item.category.name }}" class="checkbox-label dark-text-2">All {{ item.category.friendly_name }}</label>
                                </div>
                                {% for class in item.classes %}
                                <div class="checkbox-input-container">
                                    <input type="checkbox" name="id_class_{{ class.name }}" id="id_class_{{ class.name }}" data-select-all-target="{{ item.category.name }}" class="checkbox-input {{ item.category.name }}-class class-checkbox-input">
                                    <label for="id_class_{{ class.name }}" class="checkbox-label dark-text-2">{{ class.friendly_name }}</label>
                                </div>
                                {% endfor %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="input-wrapper">
                    <div class="visit-link">
                        <div class="icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" class="dark-text" viewBox="0 0 16 16">
                                <path d="M9.5 7a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0M14 7c0 2.874-3.097 6.016-4.841 7.558a1.74 1.74 0 0 1-2.318 0C5.097 13.016 2 9.874 2 7a6 6 0 1 1 12 0m-1 0A5 5 0 0 0 3 7c0 1.108.615 2.395 1.57 3.683c.934 1.258 2.087 2.377 2.933 3.126a.74.74 0 0 0 .994 0c.846-.749 2-1.867 2.933-3.126C12.385 9.395 13 8.108 13 7" />
                            </svg>
                            <span class="sr-only">Location Icon</span>
                        </div>
                        <label for="id_states" class="dark-text-2 small-text">Select States</label>
                        <input type="text" name="id_states" id="id_states" hidden>
                    </div>
                    <div class="custom-checkbox-options-input-container input-container col-2 wrapper-menu">
                        <div class="custom-checkbox-options-btn wrapper-btn">
                            <p class="default-text dark-text-2">(<span class="number-selected">0</span>) Selected</p>
                            <div class="icon-container btn-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" class="dark-text-2" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414" clip-rule="evenodd" />
                                </svg>
                                <span class="sr-only">Chevron Down Icon</span>
                            </div>
                        </div>
                        <div class="custom-checkbox-options-container">
                            <div class="options-container">
                                <div class="checkbox-input-container">
                                    <input type="checkbox" name="id_all_states" id="id_all_states" data-select-all="all" class="checkbox-input select-all-checkbox select-all-checkbox-mega">
                                    <label for="id_all_states" class="checkbox-label dark-text-2">All States</label>
                                </div>
                                {% for state in teaching_states %}
                                <div class="checkbox-input-container">
                                    <input type="checkbox" name="id_state_{{ state.name }}" id="id_state_{{ state.name }}" class="checkbox-input class-checkbox-input">
                                    <label for="id_state_{{ state.name }}" class="checkbox-label dark-text-2">{{ state.friendly_name }}</label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="search-btn btn" type="submit">
                <span class="white-text">Search</span>
                <span class="icon-container btn-icon btn-icon-right">
                    <svg xmlns="http://www.w3.org/2000/svg" class="white-text" viewBox="0 0 24 24">
                        <path d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0c.41-.41.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14" />
                    </svg>
                    <span class="sr-only">Search Icon</span>
                </span>
            </button>
        </form>

        <div class="search-results-container container-col align-start box-shadow">
            <p class="search-results-text dark-text">({{ num_of_profiles }}) members found for search query</p>
            {% for p in query_profiles %}
            <a href="{% url 'profile' p.user.username %}" class="profile-container container-row justify-start">
                <div class="img-container">
                    {% if p.image %}
                    <img src="{{ p.image.url }}" alt="{{ p.first_name }}'s Profile Image" class="img-100a">
                    {% else %}
                    <img src="{{ MEDIA_URL }}default-profile-picture.png" alt="Default Profile Image" class="img-100a">
                    {% endif %}
                </div>
                <div class="text-container container-col align-start">
                    <p class="name-text dark-text">{{ p.first_name }} {{ p.last_name }}</p>
                    <p class="teaching-text dark-text small-text">
                        {{ p.classes.all|length }} Classes &amp; Certifications{% for s in p.teaching_states.all %}, {{ s.code }}{% endfor %}
                    </p>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}

{% block postloadjs %}
{{ block.super }}

<script src="{% static 'js/custom_checkbox_options.js' %}"></script>

{% endblock %}
