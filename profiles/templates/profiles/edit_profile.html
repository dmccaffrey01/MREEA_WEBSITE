{% extends "base.html" %}

{% load static %}

{% block extra_title %}- {{ profile }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/edit_profile.css' %}">
{% endblock %}

{% block content %}

<section class="profile-section section">
    <form class="section-container container-col align-start justify-start form" action="{% url 'edit_profile' user.username %}" method="POST">
        {% if profile_saveable %}
        <div class="quick-actions-container container-row justify-start show">
            <p class="dark-text subheading">Save / Cancel:</p>
            <button type="submit" class="quick-action-btn save-btn container-col label-container">
                <p class="dark-text small-text"><span class="sr-only">Save Icon</span><i class="fa-solid fa-cloud-arrow-down"></i></p>
                <p class="label">Save Profile</p>
            </button>

            <a href="{% url 'profile' user_profile.user.username %}" class="quick-action-btn container-col label-container">
                <p class="dark-text small-text"><span class="sr-only">Cancel Icon</span><i class="fa-solid fa-xmark"></i></p>
                <p class="label">Cancel Edit</p>
            </a>
        </div>
        {% endif %}
        {% csrf_token %}
        <div class="grid-group-container container-row">
            <div class="personal-container grid-container {% if profile_editable %}w-75{% else %}w-100{% endif %} container-row justify-start">
                <div class="profile-img-container img-container">
                    {% if user_profile.image %}
                    <img src="{{ user_profile.image.url }}" alt="{{ user_profile.first_name }}'s Profile Image" class="img-100a">
                    {% else %}
                    <img src="{{ MEDIA_URL }}default-profile-picture.webp" alt="Default Profile Picture" class="img-100a">
                    {% endif %}
                </div>
                <div class="personal-info-container container-row align-start justify-start">
                    <div class="name-title-container container-col profile-small-container align-start">
                        <div class="input-group-container container-row justify-start">
                            <div class="input-group container-col align-start">
                                <label for="id_first_name" class="input-label dark-text">First Name</label>
                                {{ form.first_name }}
                            </div>
                            <div class="input-group container-col align-start">
                                <label for="id_last_name" class="input-label dark-text">Last Name</label>
                                {{ form.last_name }}
                            </div>
                        </div>
                        
                        <div class="input-group container-col align-start">
                            <label for="id_title" class="input-label dark-text">Title</label>
                            {{ form.title }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="second-row-grid-group grid-group-container container-row align-start">
            <div class="second-row-child grid-group-col-container container-col align-start justify-start">
                <div class="contact-container grid-container w-100 container-col align-start justify-start">
                    <p class="grid-title dark-text">Contact</p>
                    <div class="contact-text-container container-col align-start">
                        <div class="contact-btn container-row">
                            <p class="dark-text red-text container-col"><span class="sr-only">Email Icon</span><i class="fa-solid fa-envelope"></i></p>
                            <div class="input-group container-col align-start">
                                <label for="id_email" class="input-label dark-text">Email Address</label>
                                {{ form.email }}
                            </div>
                        </div>
                        <div class="contact-btn container-row">
                            <p class="dark-text red-text container-col"><span class="sr-only">Phone_number Icon</span><i class="fa-solid fa-phone"></i></p>
                            <div class="input-group container-col align-start">
                                <label for="id_phone_number" class="input-label dark-text">Phone Number</label>
                                {{ form.phone_number }}
                            </div>
                        </div>
                        {% for l in user_profile.links.all %}
                        <div class="contact-btn container-row profile-link-container">
                            <p class="dark-text red-text container-col"><span class="sr-only">Link Icon</span><i class="fa-solid fa-link"></i></p>
                            <div class="input-group-container container-row justify-start">
                                <div class="input-group container-col align-start">
                                    <label for="id_pl_link_{{ forloop.counter }}" class="input-label dark-text">Link {{ forloop.counter }}</label>
                                    <input type="text" name="id_pl_link_{{ forloop.counter }}" id="id_pl_link_{{ forloop.counter }}" class="link-input" value="{{ l.link }}">
                                </div>
                                <div class="input-group container-col align-start">
                                    <label for="id_pl_friendly_name_{{ forloop.counter }}" class="input-label dark-text">Link Name {{ forloop.counter }}</label>
                                    <input type="text" name="id_pl_friendly_name_{{ forloop.counter }}" id="id_pl_friendly_name_{{ forloop.counter }}" value="{{ l.friendly_name }}">
                                </div>
                                <div class="sr-only input-group container-col align-start">
                                    <label for="id_pl_name_{{ forloop.counter }}" class="input-label dark-text">Link Name {{ forloop.counter }}</label>
                                    <input type="text" name="id_pl_name_{{ forloop.counter }}" id="id_pl_name_{{ forloop.counter }}" value="{{ l.name }}">
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        <div class="new-links-container container-col align-start">
                            <div class="sr-only">
                                <div class="input-group container-col align-start">
                                    <label for="id_num_of_links" class="input-label dark-text">Num of New Links</label>
                                    <input type="text" name="id_num_of_links" id="id_num_of_links">
                                </div>
                            </div>
                        </div>
                        <div class="contact-btn container-row">
                            <p class="dark-text red-text container-col"><span class="sr-only">New Link Icon</span><i class="fa-solid fa-plus"></i></p>
                            <div class="input-group container-col align-start">
                                <p class="dark-text input-label">Insert New Link</p>
                                <div class="new-link-btn btn btn-2">
                                    Add New Link<span class="fa-icon-right"><i class="fa-solid fa-link"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="class-container grid-container container-col w-100 align-start justify-start">
                    <div class="dark-text grid-title">Classes / Certifications</div>
                </div>

                {% for category in category_and_classes %}
                <div class="class-container grid-container container-col w-100 align-start justify-start">
                    <p class="grid-title dark-text">{{ category.category.friendly_name }}</p>
                    {% for class in category.classes %}
                    <div class="contact-btn container-row">
                        <input class="checkbox-input" type="checkbox" name="id_class_{{ class.item.name }}" id="id_class_{{ class.item.name }}" {% if class.user_selected %}checked{% endif %}>
                        <label class="dark-text checkbox-label" for="id_class_{{ class.item.name }}">{{ class.item.friendly_name }}</label>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
            <div class="second-row-child bio-container grid-container w-50 container-col align-start justify-start">
                <p class="dark-text grid-title">Bio</p>
                <div class="bio-text dark-text grid-text container-col align-start justify-start">
                    <div class="input-group container-col align-start">
                        <label for="id_bio" class="input-label dark-text sr-only">Bio</label>
                        {{ form.bio }}
                    </div>
                    <p class="bio-count-text dark-text small-text"><span class="bio-count">{{ bio_count }}</span>/3000 characters</p>
                </div>
            </div>
        </div>
    </form>
</section>


{% endblock %}

{% block postloadjs %}
{{ block.super }}

<script src="{% static 'js/edit_profile.js' %}"></script>

{% endblock %}